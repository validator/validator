<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<title>RELAX NG Pluggable Datatype Libraries</title>
</head>
<body>

<h1>RELAX NG Pluggable Datatype Libraries</h1>

<p>A vendor-independent Java interface for RELAX NG datatype libraries
has been developed by James Clark and KAWAGUCHI Kohsuke.  RELAX NG
datatype libraries should be interchangeable between RELAX NG
validators that support this interface.  The interface is hosted at
SourceForge in the <a
href="http://sourceforge.net/projects/relaxng">relaxng</a> project and
<a href="api/index.html">documentation</a>.</p>

<p>In particular, the <a
href="http://www.thaiopensource.com/relaxng/jing.html">Jing</a>
validator now supports this interface.</p>

<p>The interface allows validators to find datatype libraries
dynamically at run-time.  In order for a validator to be able
to find a datatype library:</p>

<ul>

<li>the datatype library should be packaged as JAR file</li>

<li>the
JAR file must be on the Java CLASSPATH</li>

<li>the JAR file must include additional metadata in the form of a
file
<code>META-INF/services/org.relaxng.datatype.DatatypeLibraryFactory</code>,
which must contain the name of the class that implements the interface
<code>org.relaxng.datatype.DatatypeLibraryFactory</code></li>

</ul>

<p>This will only work with JDK 1.2 or greater.  It will not work with
JDK 1.1.</p>

<p>This package contains a very simple example of a datatype library.
The datatype library is implemented by the class
<code>com.thaiopensource.datatype.sample.BalancedString</code>.  The
bulk of the implementation is inherited from the abstract class
<code>com.thaiopensource.datatype.sample.SimpleDatatypeLibrary</code>,
which provides default implementations for the methods in the
interfaces which a datatype library must implement.  A class that
derives from <code>SimpleDatatypeLibrary</code> has only to implement
a <code>boolean isValid(String literal)</code> method.  The datatype
library has the URI
<code>http://www.thaiopensource.com/relaxng/datatypes/sample</code>,
and contains exactly one datatype, which is called
<code>balancedString</code>.  This datatype allows any string in which
parentheses are properly balanced (nested). To use this sample
datatype library, simply include <code>datatype-sample.jar</code> in
your CLASSPATH.  You will then be able to validate against schemas
using this additional datatype.  The file <a
href="datatype-sample.rng">datatype-sample.rng</a> is a simple RELAX
NG schema using this datatype; <a href="valid.xml">valid.xml</a> is an
instance that is valid with respect to this schema; <a
href="invalid.xml">invalid.xml</a> is an instance that is not valid
with respect to this schema.</p>

<address>
<a href="mailto:jjc@jclark.com">James Clark</a>
</address>
</body>
</html>
